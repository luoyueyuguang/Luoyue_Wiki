## what is three easy pieces
这本书认为操作系统要做到这三部分的功能:虚拟化，并发，与持久化
## 虚拟化
### CPU虚拟化
#### 调度
现在，我们来谈一谈调度
首先，假设一个简单的调度，对工作任务有如下假设

**1．每一个工作运行相同的时间。
2．所有的工作同时到达。
3．一旦开始，每个工作保持运行直到完成。
4．所有的工作只是用 CPU（即它们不执行 IO 操作）。
5．每个工作的运行时间是已知的。**

这些假设虽然不现实，却有助于我们理解

我们再来谈一下调度的指标
$T_{周转时间}=T_{完成时间} - T_{到达时间}$
这个指标体现了公平

***FIFO(First in first out)***
现在，我们来讨论一下`FIFO(First in first out)`，即先到先服务。非常朴素的一个实现
假设三个进程
```
A:10s
B:10s
C:10s
```
其平均周转时间为$(10 + 20 + 30) / 3 = 20$
但是如果`A`变为`100s`
其平均周转时间为$(100 + 110 + 120) / 3 = 110$
这种现象一般被成为`护航效应(convoy effect)`,一些耗时较少的潜在资源消费者被排在重量级的资源消费者之后

***SJF(Shortest Job First)***
让我们看一看`SJF`,它先运行最短的任务，其次是次短的任务，那么ABC的调度时间将会变为$(10 + 20 + 120) /3 = 50$,但这基于同时到达这一个假设。放宽这个假设，让`B`和`C`晚到达`10s`
平均周转时间变为$100 + (110 - 10) + (120 - 10) / 3 = 103.33$
这依然很长

***STCF(Shortest Time-to-Completion First)***



### 内存虚拟化

在最初的时候，操作系统的内存不多，需求也很少，没有任何抽象。

``` mermaid
```

多道程序与时分共享的出现使得
